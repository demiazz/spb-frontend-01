<!DOCTYPE html>
<html lang="en">
<head>
	<title>UI без боли &mdash; Примеры</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=680, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="styles/screen.css">
</head>
<body class="list">

	<header class="caption">
		<h1>UI без боли &mdash; Примеры</h1>
		<p>
			<a href="https://twitter.com/demiazz">Алексей Плуталов</a>,
			<a href="http://evilmartians.ru">Злые Марсиане</a>
		<p>
	</header>

	<section class="slide shout"><div>
		<h2>Блоки</h2>
	</div></section>

	<section class="slide"><div>
		<h2>Подопытный кролик</h2>

		<pre>
			<code>.m-popup.sk-sign-in<mark class="important">@@popup</mark></code>
			<code>  .o-icon.sk-close<mark class="important">@closeButton</mark></code>
			<code>  </code>
			<code>  <mark class="comment">/ эквивалентно</code>
			<code>  </code>
			<code>.m-popup.sk-sign-in <mark class="important">data-block="popup"</mark></code>
			<code>  .o-icon.sk-close <mark class="important">data-role="closeButton"</mark></code>
		</pre>
	</div></section>

	<section class="slide"><div>
		<h2>Регистрация блока</h2>
		<pre>
			<code>evil.block <mark class="important">"@@popup"</mark>,</code>
			<code>  init: -></code>
			<code>    @adaptToScreen()</code>
		</pre>

		<p><code>@@blockName</code> транслируется в <code>[data-block=blockName]</code>.</p>
	</div></section>

	<section class="slide"><div>
		<h2>Методы</h2>

		<pre>
			<code>evil.block "@@popup",</code>
			<code>  <mark class="important">open</mark>: -&gt;</code>
			<code>	@el.addClass("is-opened")</code>
			<code>  <mark class="important">close</mark>: -&gt;</code>
			<code>    @el.removeClass("is-opened")</code>
		</pre>

		<p><code>@el</code> ссылается на <code>$(node)</code>, где <code>node</code> - текущий DOM элемент.
	</div></section>

	<section class="slide shout"><div>
		<h2>События</h2>
	</div></section>

	<section class="slide"><div>
		<h2>Подопытный кролик на стероидах</h2>

		<pre>
			<code>.m-popup.sk-sign-in-up<mark class="important">@@popup</mark></code>
			<code>  .o-icon.sk-close<mark class="important">@closeButton</mark></code>
			<code>  form.st-sign-in-form<mark class="important">@form@signInForm</mark></code>
			<code>  form.st-sign-up-form<mark class="important">@form@signUpForm</mark></code>
		</pre>

		<p>* Для простоты, поля формы опущены, а сама форма упрощена.</p>
	</div></section>

	<section class="slide"><div>
		<h2>События блока</h2>

		<pre>
			<code>evil.block "@@popup",</code>
			<code>  <mark class="important">"on open"</mark>: -&gt;</code>
			<code>    @open()</code>
			<code>  <mark class="important">"on close"</mark>: -&gt;</code>
			<code>    @close()</code>
		</pre>

		<p><b>События</b>, как внешнее API, сильно <b>снижают code coupling</b>.</p>
	</div></section>

	<section class="slide"><div>
		<h2>События элементов</h2>

		<pre>
			<code>evil.block "@@popup",</code>
			<code>  <mark class="important">"on ajax:beforeSend on @form"</mark>: (e) -&gt;</code>
			<code>    e.el.find("submit").addClass("is-inactive")</code>
			<code>  <mark class="important">"on ajax:complete on @form"</mark>: (e) -&gt;</code>
			<code>    e.el.find("submit").removeClass("is-inactive")</code>
		</pre>

		<p>Источник события привязывается к <code>event.el</code>.</p>
	</div></section>

	<section class="slide"><div>
		<h2>Глобальные события</h2>

		<pre>
			<code>evil.block "@@popup",</code>
			<code>  <mark class="important">"on sign-in on body"</mark>: -&gt;</code>
			<code>    @switchToSignInForm() and @open()</code>
			<code>  <mark class="important">"on sign-up on body"</mark>: -&gt;</code>
			<code>    @switchToSignUpForm() and @open()</code>
		</pre>

		<p><code>$("body")</code> выступает в роли <code>event channel</code>.</p>
	</div></section>

	<section class="slide"><div>
		<h2>События окна</h2>

		<pre>
			<code>evil.block "@@popup",</code>
			<code>  <mark class="important">"on resize on window"</mark>: -&gt;</code>
			<code>    @adaptToScreen()</code>
			<code>  <mark class="important">"on message on window"</mark>: (e, message) -&gt;</code>
			<code>    if @checkMessageDomain(message)</code>
			<code>      @processMessage(message)</code>
		</pre>
	</div></section>

	<section class="slide shout"><div>
		<h2>Взаимодействие</h2>
	</div></section>

	<section class="slide"><div>
		<h2>Подопытный кролик мутирует</h2>

		<pre>
			<code>.m-popup.sk-sign-in-up<mark class="important">@@popup@@closable</mark></code>
			<code>  .o-icon.sk-close<mark class="important">@closeButton</mark></code>
			<code>  form.st-sign-in-form<mark class="important">@@remoteForm@signInForm</mark></code>
			<code>  form.st-sign-up-form<mark class="important">@@remoteForm@signUpForm</mark></code>
		</pre>
	</div></section>

	<section class="slide"><div>
		<h2>Вертикальное взаимодействие</h2>

		<pre>
			<code>evil.block "@@remoteForm",</code>
			<code>  "on ajax:success": -&gt;</code>
			<code>    <mark class="important">@el.trigger("sent")</mark></code>
			<code>  </code>
			<code>evil.block "@@popup",</code>
			<code>  <mark class="important">"on sent on @signInForm, @signUpForm"</mark>: -&gt;</code>
			<code>    @close()</code>
		</pre>

		<p></p>
	</div></section>

	<section class="slide"><div>
		<h2>Горизонтальное взаимодействие</h2>

		<pre>
			<code>evil.block "@@popup",</code>
			<code>  open: -&gt;</code>
			<code>    <mark class="important">$("body").trigger("close")</mark>; @show()</code>
			<code>  </code>
			<code>evil.block "@@popup",</code>
			<code>  open: -&gt;</code>
			<code>    <mark class="important">$("@@popup").trigger("close")</mark>; @show()</code>
		</pre>

		<p></p>
	</div></section>

	<section class="slide"><div>
		<h2>Наследование</h2>

		<pre>
			<code>evil.block "@@closeable",</code>
			<code>  "on click on @closeButton": -&gt;</code>
			<code>    <mark class="important">@el.trigger("close")</mark></code>
			<code>  </code>
			<code>evil.block "@@popup",</code>
			<code>  <mark class="important">"on close"</mark>: -&gt;</code>
			<code>    @close()</code>
		</pre>

		<p></p>
	</div></section>

	<section class="slide shout"><div>
		<h2>Рендеринг</h2>
	</div></section>

	<section class="slide"><div>
		<h2>Рендеринг на сервере</h2>

		<pre>
			<code>evil.block "@@commentBox",</code>
			<code>  "on click on @commentButton": -&gt;</code>
			<code>    <mark class="important">@commentForm.addClass("is-opened")</mark></code>
		</pre>

		<p>На сервере заранее формируется нужный HTML. На клиенте производится только
		   переключение его видимости.</p>
	</div></section>

	<section class="slide"><div>
		<h2>Рендеринг на сервере по запросу</h2>

		<pre>
			<code>evil.block "@@commentBox",</code>
			<code>  "on ajax:success on @commentForm": (e, reply) -&gt;</code>
				<code>   	<mark class="important">replyEl = $(reply).appendTo(@replies)</mark></code>
				<code>    <mark class="important">evil.block.vitalize(replyEl)</mark></code>
		</pre>

		<p>С сервера вместо JSON отправляется готовый HTML, с последующей инъекцией на страницу.</p>
	</div></section>

	<section class="slide"><div>
		<h2>JST и Tilt</h2>

		<pre>
			<code>evil.block "@@commentBox",</code>
			<code>  "on ajax:success on @commentForm": (e, reply) -&gt;</code>
			<code>    <mark class="important">replyHtml = JST["comment"](reply)</mark></code>
			<code>   	<mark class="important">replyEl = $(replyHtml).appendTo(@replies)</mark></code>
			<code>    <mark class="important">evil.block.vitalize(replyEl)</mark></code>
		</pre>

		<p>Классический пример рендеринга на клиенте.</p>
	</div></section>

	<section class="slide"><div>
		<h2>Facebook React</h2>

		<pre>
			<code>evil.block "@@commentBox",</code>
			<code>  init: -></code>
			<code>    $.get(@commentsUrl).done (comments) =&gt;</code>
			<code>      for comment in comments</code>
			<code>        <mark class="important">React.renderComponent(</mark></code>
			<code>        <mark class="important">  Comment(comment), @el.get(0)</mark></code>
			<code>        <mark class="important">)</mark></code>
		</pre>

		<p></p>
	</div></section>

	<section class="slide shout"><div>
		<h2>Twitter Flight</h2>
	</div></section>

	<section class="slide" lang="ru"><div>
		<h2>&laquo;Старший&raquo; брат</h2>

		<ul>
			<li>Официальный срок появления &mdash; на 3 месяца раньше;</li>
			<li class="next">Ручной биндинг объектов;</li>
			<li class="next">Функциональные миксины, вместо объектных;</li>
			<li class="next">Соглашения по разделению на UI и Data компоненты, и связанные с ними события;</li>
			<li class="next">Активное использование require.js.</li>
		</ul>
	</div></section>

	<section class="slide" lang="ru"><div>
		<h2>Интересно?</h2>

		<ul>
			<li>Официальная страница: <a href="http://twitter.github.io/flight/">http://twitter.github.io/flight/</a>;</li>
			<li>Репозиторий: <a href="https://github.com/flightjs/flight">https://github.com/flightjs/flight</a>;</li>
			<li>Интеграция с Rails: <a href="https://github.com/rezwyi/flight-for-rails">https://github.com/rezwyi/flight-for-rails</a>;</li>
			<li>Книга для начинающих: <a href="http://www.packtpub.com/getting-started-with-twitter-flight/book">http://www.packtpub.com/getting-started-with-twitter-flight/book</a>.</li>
		</ul>
	</div></section>

	<section class="slide shout">
		<h2>Вопросы?</h2>
	</section>
	<!--
		To hide progress bar from entire presentation
		just remove “progress” element.
		-->
	<div class="progress"><div></div></div>
	<script src="./shower.js"></script>
	<!-- Copyright © 2014 Alexey Plutalov, Evil Martians -->
</body>
</html>
